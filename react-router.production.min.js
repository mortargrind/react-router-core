import{createContext as e,useRef as t,useReducer as n,useLayoutEffect as r,createElement as l,useContext as a,useEffect as i,useMemo as c,useCallback as u,Children as o,isValidElement as p,Fragment as h}from"react";import{createMemoryHistory as s,Action as f,parsePath as m}from"history";function d(e,t){if(!e)throw new Error(t)}const g=e({static:!1}),v=e({outlet:null,params:{},pathname:"",basename:"",route:null});function y({children:e,initialEntries:a,initialIndex:i}){let c=t();null==c.current&&(c.current=s({initialEntries:a,initialIndex:i}));let u=c.current,[o,p]=n((e,t)=>t,{action:u.action,location:u.location});return r(()=>u.listen(p),[u]),l(S,{children:e,action:o.action,location:o.location,navigator:u})}function $({to:e,replace:t,state:n}){I()||d(!1);let r=O();return i(()=>{r(e,{replace:t,state:n})}),null}function b(){return j()}function E({element:e=l(b,null)}){return e}function S({children:e=null,action:t=f.Pop,location:n,navigator:r,static:a=!1}){return I()&&d(!1),l(g.Provider,{children:e,value:{action:t,location:n,navigator:r,static:a}})}function w({basename:e="",children:t}){return U(z(t),e)}function x(e,t=!0){I()||d(!1);let n=a(g).navigator;i(()=>{if(!t)return;let r=n.block(t=>{let n={...t,retry(){r(),t.retry()}};e(n)});return r},[n,e,t])}function W(e){I()||d(!1);let t=a(g).navigator,n=C(e);return t.createHref(n)}function I(){return null!=a(g).location}function P(){return I()||d(!1),a(g).location}function R(e){return I()||d(!1),J(e,P().pathname)}function O(){I()||d(!1);let e=a(g).navigator,{pathname:n,basename:r}=a(v),l=t(!1);return i(()=>{l.current=!0}),u((t,a={})=>{if(l.current)if("number"==typeof t)e.go(t);else{let l=K(t,n,r);(a.replace?e.replace:e.push)(l,a.state)}},[e,n])}function j(){return a(v).outlet}function k(){return a(v).params}function C(e){let{pathname:t,basename:n}=a(v);return c(()=>K(e,t,n),[e,t,n])}function H(e,t=""){return I()||d(!1),U(c(()=>q(e),[e]),t)}function U(e,t=""){let{route:n,pathname:r,params:i}=a(v);t=t?M([r,t]):r;let u=P(),o=c(()=>B(e,u,t),[u,e,t]);return o?o.reduceRight((e,{params:n,pathname:r,route:a})=>l(v.Provider,{children:a.element,value:{outlet:e,params:{...i,...n},pathname:M([t,r]),basename:t,route:a}}),null):null}function q(e){return e.map(e=>{let t={path:e.path||"/",caseSensitive:!0===e.caseSensitive,element:e.element||l(b,null)};return e.children&&(t.children=q(e.children)),t})}function z(e){let t=[];return o.forEach(e,e=>{if(!p(e))return;if(e.type===h)return void t.push.apply(t,z(e.props.children));let n={path:e.props.path||"/",caseSensitive:!0===e.props.caseSensitive,element:e};if(e.props.children){let t=z(e.props.children);t.length&&(n.children=t)}t.push(n)}),t}function A(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>(null==t[n]&&d(!1),t[n])).replace(/\/*\*$/,e=>null==t["*"]?"":t["*"].replace(/^\/*/,"/"))}function B(e,t,n=""){"string"==typeof t&&(t=m(t));let r=t.pathname||"/";if(n){let e=n.replace(/^\/*/,"/").replace(/\/+$/,"");if(!r.startsWith(e))return null;r=r===e?"/":r.slice(e.length)}let l=function e(t,n=[],r="",l=[],a=[]){return t.forEach((t,i)=>{let c=M([r,t.path]),u=l.concat(t),o=a.concat(i);t.children&&e(t.children,n,c,u,o),n.push([c,u,o])}),n}(e);!function(e){let t=e.reduce((e,[t])=>(e[t]=function(e){let t=e.split("/"),n=t.length;t.some(F)&&(n+=-2);return t.filter(e=>!F(e)).reduce((e,t)=>e+(D.test(t)?2:""===t?1:10),n)}(t),e),{});!function(e,t){let n=e.slice(0);e.sort((e,r)=>t(e,r)||n.indexOf(e)-n.indexOf(r))}(e,(e,n)=>{let[r,,l]=e,a=t[r],[i,,c]=n,u=t[i];return a!==u?u-a:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(l,c)})}(l);let a=null;for(let i=0;null==a&&i<l.length;++i)a=G(l[i],r);return a}const D=/^:\w+$/,F=e=>"*"===e;function G(e,t){let n=e[1],r="/",l={},a=[];for(let i=0;i<n.length;++i){let e=n[i],c="/"===r?t:t.slice(r.length)||"/",u=J({path:e.path,caseSensitive:e.caseSensitive,end:i===n.length-1},c);if(!u)return null;r=M([r,u.pathname]),l={...l,...u.params},a.push({route:e,pathname:r,params:l})}return a}function J(e,t){"string"==typeof e&&(e={path:e});let{path:n,caseSensitive:r=!1,end:l=!0}=e,[a,i]=function(e,t,n){let r=[],l="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";e.endsWith("*")?(e.endsWith("/*")&&(l+="\\/?"),r.push("*"),l+="(.*)"):n&&(l+="\\/?");n&&(l+="$");let a=t?void 0:"i";return[new RegExp(l,a),r]}(n,r,l),c=t.match(a);if(!c)return null;let u=c[1],o=c.slice(2);return{path:n,pathname:u,params:i.reduce((e,t,n)=>(e[t]=function(e,t){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(n){return e}}(o[n]),e),{})}}function K(e,t="/",n=""){let{pathname:r,search:l="",hash:a=""}="string"==typeof e?m(e):e;return{pathname:r?function(e,t){let n=N((r=t,r.replace(/\/+$/,"")));var r;return N(e).forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?M(n):"/"}(r,r.startsWith("/")?n?"/"+n:"/":t):t,search:l,hash:a}}const L=e=>e.replace(/\/\/+/g,"/"),M=e=>L(e.join("/")),N=e=>L(e).split("/");export{y as MemoryRouter,$ as Navigate,b as Outlet,E as Route,S as Router,w as Routes,q as createRoutesFromArray,z as createRoutesFromChildren,A as generatePath,J as matchPath,B as matchRoutes,K as resolvePath,x as useBlocker,W as useHref,I as useInRouterContext,P as useLocation,R as useMatch,O as useNavigate,j as useOutlet,k as useParams,C as useResolvedPath,H as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
