!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("history")):"function"==typeof define&&define.amd?define(["exports","react","history"],t):t((e=e||self).ReactRouter={},e.React,e.HistoryLibrary)}(this,(function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!e)throw new Error(t)}var u=t.createContext({static:!1}),i=t.createContext({outlet:null,params:{},pathname:"",basename:"",route:null});function o(){return p()}function c(e){var r=e.children,i=void 0===r?null:r,o=e.action,c=void 0===o?n.Action.Pop:o,s=e.location,f=e.navigator,p=e.static,h=void 0!==p&&p;return l()&&a(!1),t.createElement(u.Provider,{children:i,value:{action:c,location:s,navigator:f,static:h}})}function l(){return null!=t.useContext(u).location}function s(){return l()||a(!1),t.useContext(u).location}function f(){l()||a(!1);var e=t.useContext(u).navigator,n=t.useContext(i),r=n.pathname,o=n.basename,c=t.useRef(!1);return t.useEffect((function(){c.current=!0})),t.useCallback((function(t,n){if(void 0===n&&(n={}),c.current)if("number"==typeof t)e.go(t);else{var a=E(t,r,o);(n.replace?e.replace:e.push)(a,n.state)}}),[e,r])}function p(){return t.useContext(i).outlet}function h(e){var n=t.useContext(i),r=n.pathname,a=n.basename;return t.useMemo((function(){return E(e,r,a)}),[e,r,a])}function v(e,n){void 0===n&&(n="");var a=t.useContext(i),u=(a.route,a.pathname),o=a.params;n=n?P([u,n]):u;var c=s(),l=t.useMemo((function(){return g(e,c,n)}),[c,e,n]);return l?l.reduceRight((function(e,a){var u=a.params,c=a.pathname,l=a.route;return t.createElement(i.Provider,{children:l.element,value:{outlet:e,params:r({},o,{},u),pathname:P([n,c]),basename:n,route:l}})}),null):null}function d(e){return e.map((function(e){var n={path:e.path||"/",caseSensitive:!0===e.caseSensitive,element:e.element||t.createElement(o,null)};return e.children&&(n.children=d(e.children)),n}))}function m(e){var n=[];return t.Children.forEach(e,(function(e){if(t.isValidElement(e))if(e.type!==t.Fragment){var r={path:e.props.path||"/",caseSensitive:!0===e.props.caseSensitive,element:e};if(e.props.children){var a=m(e.props.children);a.length&&(r.children=a)}n.push(r)}else n.push.apply(n,m(e.props.children))})),n}function g(e,t,r){void 0===r&&(r=""),"string"==typeof t&&(t=n.parsePath(t));var a=t.pathname||"/";if(r){var u=r.replace(/^\/*/,"/").replace(/\/+$/,"");if(!a.startsWith(u))return null;a=a===u?"/":a.slice(u.length)}var i=function e(t,n,r,a,u){void 0===n&&(n=[]);void 0===r&&(r="");void 0===a&&(a=[]);void 0===u&&(u=[]);return t.forEach((function(t,i){var o=P([r,t.path]),c=a.concat(t),l=u.concat(i);t.children&&e(t.children,n,o,c,l),n.push([o,c,l])})),n}(e);!function(e){var t=e.reduce((function(e,t){var n=t[0];return e[n]=function(e){var t=e.split("/"),n=t.length;t.some(x)&&(n+=-2);return t.filter((function(e){return!x(e)})).reduce((function(e,t){return e+(y.test(t)?2:""===t?1:10)}),n)}(n),e}),{});n=e,r=function(e,n){var r=e[0],a=e[2],u=t[r],i=n[0],o=n[2],c=t[i];return u!==c?c-u:function(e,t){return e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}))?e[e.length-1]-t[t.length-1]:0}(a,o)},a=n.slice(0),n.sort((function(e,t){return r(e,t)||a.indexOf(e)-a.indexOf(t)}));var n,r,a}(i);for(var o=null,c=0;null==o&&c<i.length;++c)o=R(i[c],a);return o}var y=/^:\w+$/,x=function(e){return"*"===e};function R(e,t){for(var n=e[1],a="/",u={},i=[],o=0;o<n.length;++o){var c=n[o],l="/"===a?t:t.slice(a.length)||"/",s=C({path:c.path,caseSensitive:c.caseSensitive,end:o===n.length-1},l);if(!s)return null;a=P([a,s.pathname]),u=r({},u,{},s.params),i.push({route:c,pathname:a,params:u})}return i}function C(e,t){"string"==typeof e&&(e={path:e});var n=e,r=n.path,a=n.caseSensitive,u=void 0!==a&&a,i=n.end,o=function(e,t,n){var r=[],a="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}))+")";e.endsWith("*")?(e.endsWith("/*")&&(a+="\\/?"),r.push("*"),a+="(.*)"):n&&(a+="\\/?");n&&(a+="$");var u=t?void 0:"i";return[new RegExp(a,u),r]}(r,u,void 0===i||i),c=o[0],l=o[1],s=t.match(c);if(!s)return null;var f=s[1],p=s.slice(2);return{path:r,pathname:f,params:l.reduce((function(e,t,n){return e[t]=function(e,t){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}(p[n]),e}),{})}}function E(e,t,r){void 0===t&&(t="/"),void 0===r&&(r="");var a="string"==typeof e?n.parsePath(e):e,u=a.pathname,i=a.search,o=void 0===i?"":i,c=a.hash,l=void 0===c?"":c;return{pathname:u?function(e,t){var n=O((r=t,r.replace(/\/+$/,"")));var r;return O(e).forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?P(n):"/"}(u,u.startsWith("/")?r?"/"+r:"/":t):t,search:o,hash:l}}var b=function(e){return e.replace(/\/\/+/g,"/")},P=function(e){return b(e.join("/"))},O=function(e){return b(e).split("/")};e.MemoryRouter=function(e){var r=e.children,a=e.initialEntries,u=e.initialIndex,i=t.useRef();null==i.current&&(i.current=n.createMemoryHistory({initialEntries:a,initialIndex:u}));var o=i.current,l=t.useReducer((function(e,t){return t}),{action:o.action,location:o.location}),s=l[0],f=l[1];return t.useLayoutEffect((function(){return o.listen(f)}),[o]),t.createElement(c,{children:r,action:s.action,location:s.location,navigator:o})},e.Navigate=function(e){var n=e.to,r=e.replace,u=e.state;l()||a(!1);var i=f();return t.useEffect((function(){i(n,{replace:r,state:u})})),null},e.Outlet=o,e.Route=function(e){var n=e.element;return void 0===n?t.createElement(o,null):n},e.Router=c,e.Routes=function(e){var t=e.basename,n=void 0===t?"":t;return v(m(e.children),n)},e.createRoutesFromArray=d,e.createRoutesFromChildren=m,e.generatePath=function(e,t){return void 0===t&&(t={}),e.replace(/:(\w+)/g,(function(e,n){return null==t[n]&&a(!1),t[n]})).replace(/\/*\*$/,(function(e){return null==t["*"]?"":t["*"].replace(/^\/*/,"/")}))},e.matchPath=C,e.matchRoutes=g,e.resolvePath=E,e.useBlocker=function(e,n){void 0===n&&(n=!0),l()||a(!1);var i=t.useContext(u).navigator;t.useEffect((function(){if(n){var t=i.block((function(n){var a=r({},n,{retry:function(){t(),n.retry()}});e(a)}));return t}}),[i,e,n])},e.useHref=function(e){l()||a(!1);var n=t.useContext(u).navigator,r=h(e);return n.createHref(r)},e.useInRouterContext=l,e.useLocation=s,e.useMatch=function(e){return l()||a(!1),C(e,s().pathname)},e.useNavigate=f,e.useOutlet=p,e.useParams=function(){return t.useContext(i).params},e.useResolvedPath=h,e.useRoutes=function(e,n){return void 0===n&&(n=""),l()||a(!1),v(t.useMemo((function(){return d(e)}),[e]),n)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-router.production.min.js.map
